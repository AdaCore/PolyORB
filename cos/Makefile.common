IDLAC = ../../idlac/idlac

GNATMAKE_FLAGS = -I$(srcdir) \
	-I../../src \
	-I$(srcdir)/../../src \
	$(ADASOCKETS_INCLUDE) \
	-g -O2 -m -gnata
	-largs $(ADASOCKETS_LIBS)

CLEANFILES = b~*.* *.o *.ali

DISTCLEANFILES = $(PROGS)

SUFFIXES = .idl .ads .adb

all-local:: $(PROGS)

.idl.ads .idl.adb:
	$(IDLAC) -I$(srcdir) $<

.PHONY: force

$(IDLAC): force
	cd ../../idlac && $(MAKE) idlac

force::
	cd ../../src && $(MAKE)
	for dir in $(COS_DIRS);\
	do\
	  (cd $$dir && $(MAKE));\
	done
