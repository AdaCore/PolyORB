                                                                   
configuration MyConfig is                                          

  Partition_1 : Partition := ();
  procedure Master_Procedure is in Partition_1;                    

  Partition_2, Partition_3 : Partition;

  for Partition_2'Host use "foo.bar.com";                          

  function Best_Node (Partition_Name : String) return String;
  pragma Import (Shell, Best_Node, "best-node");
  for Partition_3'Host use Best_Node;                              

  Partition_4 : Partition := (RCI_B5);                             

  for Partition_1'Storage_Dir use "/usr/you/test/bin";             
  for Partition'Storage_Dir use "bin";                             

  procedure Another_Main;
  for Partition_3'Main use Another_Main;                           

  for Partition_3'Reconnection use Blocked_Until_Restart;          
  for Partition_4'Command_Line use "-v";                           
  for Partition_4'Termination use Local_Termination;               

  pragma Starter (Method => Ada);                                  

  pragma Boot_Server
    (Protocol_Name => "tcp",
     Protocol_Data => "`hostname`:`unused-port`");                 

  pragma Version (False);                                          

  Channel_1 : Channel := (Partition_1, Partition_4);
  Channel_2 : Channel := (Partition_2, Partition_3);               

  for Channel_1'Filter use "ZIP";                                  
  for Channel_2'Filter use "My_Own_Filter";                        
  for Partition'Filter use "ZIP";                                  

  pragma Registration_Filter ("Some_Filter");                      

begin                                                              
   Partition_2 := (RCI_B2, RCI_B4, Normal);                        
   Partition_3 := (RCI_B3);                                        
end MyConfig;
