# Makefile.in generated automatically by automake 1.3 from Makefile.am

# Copyright (C) 1994, 1995, 1996, 1997, 1998 Free Software Foundation, Inc.
# This Makefile.in is free software; the Free Software Foundation
# gives unlimited permission to copy and/or distribute it,
# with or without modifications, as long as this notice is preserved.

# This program is distributed in the hope that it will be useful,
# but WITHOUT ANY WARRANTY, to the extent permitted by law; without
# even the implied warranty of MERCHANTABILITY or FITNESS FOR A
# PARTICULAR PURPOSE.

#


SHELL = /bin/sh

srcdir = @srcdir@
top_srcdir = @top_srcdir@
VPATH = @srcdir@
prefix = @prefix@
exec_prefix = @exec_prefix@

bindir = @bindir@
sbindir = @sbindir@
libexecdir = @libexecdir@
datadir = @datadir@
sysconfdir = @sysconfdir@
sharedstatedir = @sharedstatedir@
localstatedir = @localstatedir@
libdir = @libdir@
infodir = @infodir@
mandir = @mandir@
includedir = @includedir@
oldincludedir = /usr/include

DISTDIR =

pkgdatadir = $(datadir)/@PACKAGE@
pkglibdir = $(libdir)/@PACKAGE@
pkgincludedir = $(includedir)/@PACKAGE@

top_builddir = ..

ACLOCAL = @ACLOCAL@
AUTOCONF = @AUTOCONF@
AUTOMAKE = @AUTOMAKE@
AUTOHEADER = @AUTOHEADER@

INSTALL = @INSTALL@
INSTALL_PROGRAM = @INSTALL_PROGRAM@
INSTALL_DATA = @INSTALL_DATA@
INSTALL_SCRIPT = @INSTALL_SCRIPT@
transform = @program_transform_name@

NORMAL_INSTALL = :
PRE_INSTALL = :
POST_INSTALL = :
NORMAL_UNINSTALL = :
PRE_UNINSTALL = :
POST_UNINSTALL = :
build_alias = @build_alias@
build_triplet = @build@
host_alias = @host_alias@
host_triplet = @host@
target_alias = @target_alias@
target_triplet = @target@
ADA = @ADA@
AWK = @AWK@
BOOT_SERVER = @BOOT_SERVER@
CC = @CC@
CP_PRESERVE = @CP_PRESERVE@
EXEEXT = @EXEEXT@
EXTRA_LIBS = @EXTRA_LIBS@
GNATLS = @GNATLS@
GNAT_SOURCE = @GNAT_SOURCE@
ISTHRBIO = @ISTHRBIO@
LAUNCHING_INCLUDED = @LAUNCHING_INCLUDED@
LINKTEST = @LINKTEST@
MAKEINFO = @MAKEINFO@
PACKAGE = @PACKAGE@
PLATFORM_SPECIFIC = @PLATFORM_SPECIFIC@
PROTOCOLSOBJECTS = @PROTOCOLSOBJECTS@
PROTOCOLSSOURCES = @PROTOCOLSSOURCES@
PSNAME = @PSNAME@
RANLIB = @RANLIB@
RSH = @RSH@
RTS_SANITY_DIR = @RTS_SANITY_DIR@
SED = @SED@
SUPPORTS_LOCAL_LAUNCH = @SUPPORTS_LOCAL_LAUNCH@
S_GTPLSP_ADB = @S_GTPLSP_ADB@
S_GTPLSP_ADS = @S_GTPLSP_ADS@
TAR = @TAR@
TCP_INCLUDED = @TCP_INCLUDED@
TCP_PLATFORM_SOURCES = @TCP_PLATFORM_SOURCES@
UNZIP = @UNZIP@
VERSION = @VERSION@

AUTOMAKE_OPTIONS = no-dependencies foreign

ADA_FOR_TARGET = @ADA_FOR_TARGET@

CONSTANTS_SH = ${srcdir}/constants.sh
CP           = cp
GARLIC       = ${prefix}/lib/garlic
GNATFLAGS    = -gnatg @GNATFLAGS@
INCFLAGS     = -I. -I${srcdir}

GNATMAKE     = gnatmake
GNATBIND     = gnatbind

PLATFORM            = @PLATFORM_SPECIFIC@

CONSTANTS_PLATFORM  = ${srcdir}/5${PLATFORM}garcon.ads

LAUNCHINGOBJECTS = \
s-gaplsp.o\
s-garnam.o\
s-garrem.o

LAUNCHINGSOURCES = \
          s-gaplsp.ads                        \
${srcdir}/s-garnam.ads ${srcdir}/s-garnam.adb \
${srcdir}/s-garrem.ads ${srcdir}/s-garrem.adb

TCPOBJECTS = \
s-gtplsp.o\
s-gartcp.o

TCPSOURCES = \
${TCP_PLATFORM_SOURCES}                       \
${srcdir}/s-gartcp.ads ${srcdir}/s-gartcp.adb

NOBLTCPOBJECTS = \
s-ganobl.o

NOBLTCPSOURCES = \
${srcdir}/s-ganobl.ads ${srcdir}/s-ganobl.adb

COMMONOBJECTS = \
s-galiop.o\
s-galite.o\
s-ganata.o\
s-ganeut.o\
s-gaphlo.o\
s-garcon.o\
s-gardeb.o\
s-garexc.o\
s-garfil.o\
s-gargro.o\
s-garhea.o\
s-garlic.o\
s-garloc.o\
s-garopt.o\
s-garela.o\
s-garpar.o\
s-garpri.o\
s-garpro.o\
s-garrep.o\
s-garser.o\
s-garsta.o\
s-gartra.o\
s-gaprco.o\
s-garstr.o\
s-gartab.o\
s-garthi.o\
s-garter.o\
s-gartyp.o\
s-garuni.o\
s-garuti.o\
s-gasoli.o\
s-gatcop.o\
s-parint.o\
s-rpc.o\
s-rpcpoo.o\
s-rpstio.o\
s-stratt.o

COMMONSOURCES = \
          s-galiop.ads                        \
${srcdir}/s-galite.ads ${srcdir}/s-galite.adb \
${srcdir}/s-ganeut.ads ${srcdir}/s-ganeut.adb \
${srcdir}/s-gaphlo.ads ${srcdir}/s-gaphlo.adb \
          s-garcon.ads                        \
${srcdir}/s-gardeb.ads ${srcdir}/s-gardeb.adb \
${srcdir}/s-garfil.ads ${srcdir}/s-garfil.adb \
${srcdir}/s-gargro.ads ${srcdir}/s-gargro.adb \
${srcdir}/s-garhea.ads ${srcdir}/s-garhea.adb \
${srcdir}/s-garlic.ads                        \
${srcdir}/s-garloc.ads ${srcdir}/s-garloc.adb \
${srcdir}/s-garopt.ads ${srcdir}/s-garopt.adb \
${srcdir}/s-garpar.ads ${srcdir}/s-garpar.adb \
${srcdir}/s-garpro.ads                        \
${srcdir}/s-garpri.ads                        \
${srcdir}/s-ganata.ads ${srcdir}/s-ganata.adb \
${srcdir}/s-garpro.ads ${srcdir}/s-garpro.adb \
${srcdir}/s-garexc.ads ${srcdir}/s-garexc.adb \
${srcdir}/s-garrep.ads ${srcdir}/s-garrep.adb \
${srcdir}/s-garser.ads           s-garser.adb \
${srcdir}/s-garsta.ads ${srcdir}/s-garsta.adb \
${srcdir}/s-garstr.ads $(srcdir)/s-garstr.adb \
${srcdir}/s-garthi.ads                        \
${srcdir}/s-gartra.ads ${srcdir}/s-gartra.adb \
${srcdir}/s-gaprco.ads           s-gaprco.adb \
${srcdir}/s-garela.ads ${srcdir}/s-garela.adb \
${srcdir}/s-garter.ads ${srcdir}/s-garter.adb \
${srcdir}/s-gartab.ads ${srcdir}/s-gartab.adb \
${srcdir}/s-gartyp.ads ${srcdir}/s-gartyp.adb \
${srcdir}/s-garuni.ads ${srcdir}/s-garuni.adb \
${srcdir}/s-garuti.ads ${srcdir}/s-garuti.adb \
${srcdir}/s-gasoli.ads ${srcdir}/s-gasoli.adb \
          s-gatcop.ads                        \
${srcdir}/s-gastha.ads ${srcdir}/s-gastha.adb \
${srcdir}/s-parint.ads ${srcdir}/s-parint.adb \
${srcdir}/s-rpc.ads    ${srcdir}/s-rpc.adb    \
${srcdir}/s-rpcpoo.ads ${srcdir}/s-rpcpoo.adb \
${srcdir}/s-rpstio.ads ${srcdir}/s-rpstio.adb \
${srcdir}/s-stratt.adb

OBJECTS = \
@PROTOCOLSOBJECTS@ \
@LAUNCHINGOBJECTS@ \
$(FILTERSOBJECTS) \
$(COMMONOBJECTS)

SOURCES = \
@PROTOCOLSSOURCES@ \
@LAUNCHINGSOURCES@ \
$(FILTERSSOURCES) \
$(COMMONSOURCES)

CLEANFILES = *.ali s-garcon.ads *.o s-gaprco.adb s-galiop.ads\
	s-garser.adb s-gaplsp.ads $(FILTERSOBJECTS) split\
	inlining gnatlib/* constants_nodef\
	b_*.c isthrbio${EXEEXT}

DISTCLEANFILES = config.h ${TCP_PLATFORM_SOURCES} s-gatcop.ads \
	Makefile.fil

SUFFIXES = .adb .ads .ali .o .xrb
mkinstalldirs = $(SHELL) $(top_srcdir)/support/mkinstalldirs
CONFIG_HEADER = ../[Garlic/config.h]
CONFIG_CLEAN_FILES =  s-gaplsp.ads s-gaprco.adb s-garser.adb
DIST_COMMON =  ChangeLog Makefile.am Makefile.in TODO s-gaplsp.ads.in \
s-gaprco.adb.in s-garser.adb.in


DISTFILES = $(DIST_COMMON) $(SOURCES) $(HEADERS) $(TEXINFOS) $(EXTRA_DIST)

GZIP = --best
all: Makefile all-local

.SUFFIXES:
.SUFFIXES: .adb .ads .ali .o .xrb
$(srcdir)/Makefile.in: Makefile.am $(top_srcdir)/configure.in $(ACLOCAL_M4)
	cd $(top_srcdir) && $(AUTOMAKE) --foreign Garlic/Makefile

Makefile: $(srcdir)/Makefile.in  $(top_builddir)/config.status
	cd $(top_builddir) \
	  && CONFIG_FILES=$(subdir)/$@ CONFIG_HEADERS= $(SHELL) ./config.status

s-gaplsp.ads: $(top_builddir)/config.status s-gaplsp.ads.in
	cd $(top_builddir) && CONFIG_FILES=$(subdir)/$@ CONFIG_HEADERS= ./config.status
s-gaprco.adb: $(top_builddir)/config.status s-gaprco.adb.in
	cd $(top_builddir) && CONFIG_FILES=$(subdir)/$@ CONFIG_HEADERS= ./config.status
s-garser.adb: $(top_builddir)/config.status s-garser.adb.in
	cd $(top_builddir) && CONFIG_FILES=$(subdir)/$@ CONFIG_HEADERS= ./config.status
tags: TAGS
TAGS:


distdir = $(top_builddir)/$(PACKAGE)-$(VERSION)/$(subdir)

subdir = Garlic

distdir: $(DISTFILES)
	@for file in $(DISTFILES); do \
	  d=$(srcdir); \
	  test -f $(distdir)/$$file \
	  || ln $$d/$$file $(distdir)/$$file 2> /dev/null \
	  || cp -p $$d/$$file $(distdir)/$$file; \
	done
info:
dvi:
check: all
	$(MAKE)
installcheck:
install-exec: 
	@$(NORMAL_INSTALL)

install-data: install-data-local
	@$(NORMAL_INSTALL)

install: install-exec install-data all
	@:

uninstall: 

install-strip:
	$(MAKE) INSTALL_PROGRAM='$(INSTALL_PROGRAM) -s' INSTALL_SCRIPT='$(INSTALL_PROGRAM)' install
installdirs:


mostlyclean-generic:
	-test -z "$(MOSTLYCLEANFILES)" || rm -f $(MOSTLYCLEANFILES)

clean-generic:
	-test -z "$(CLEANFILES)" || rm -f $(CLEANFILES)

distclean-generic:
	-rm -f Makefile $(DISTCLEANFILES)
	-rm -f config.cache config.log stamp-h stamp-h[0-9]*
	-test -z "$(CONFIG_CLEAN_FILES)" || rm -f $(CONFIG_CLEAN_FILES)

maintainer-clean-generic:
	-test -z "$(MAINTAINERCLEANFILES)" || rm -f $(MAINTAINERCLEANFILES)
	-test -z "$(BUILT_SOURCES)" || rm -f $(BUILT_SOURCES)
mostlyclean:  mostlyclean-generic

clean:  clean-generic mostlyclean

distclean:  distclean-generic clean
	-rm -f config.status

maintainer-clean:  maintainer-clean-generic distclean
	@echo "This command is intended for maintainers to use;"
	@echo "it deletes files that may require special tools to rebuild."

.PHONY: tags distdir info dvi installcheck install-exec install-data \
install uninstall all installdirs mostlyclean-generic distclean-generic \
clean-generic maintainer-clean-generic clean mostlyclean distclean \
maintainer-clean


Makefile: Makefile.fil

@FILTERFILE@

isthrbio${EXEEXT}: ${srcdir}/isthrbio.adb Makefile ${TCP_PLATFORM_SOURCES}
	${GNATMAKE} -a ${CFLAGS} ${INCFLAGS} ${GNATFLAGS} -I${srcdir} -I. \
		${srcdir}/isthrbio.adb

s-gtplsp.o: ${TCP_PLATFORM_SOURCES}
	${ADA_FOR_TARGET} -c ${CFLAGS} ${INCFLAGS} ${GNATFLAGS} \
		`echo ${TCP_PLATFORM_SOURCES} | ${SED} -e 's/ .*$$//'`

%.o: %.adb
	${ADA_FOR_TARGET} -c ${CFLAGS} ${INCFLAGS} ${GNATFLAGS} $<

%.o: %.ads
	${ADA_FOR_TARGET} -c ${CFLAGS} ${INCFLAGS} ${GNATFLAGS} $<

%.ali: %.adb
	${ADA_FOR_TARGET} -c ${CFLAGS} ${INCFLAGS} ${GNATFLAGS} $<

%.ali: %.ads
	${ADA_FOR_TARGET} -c ${CFLAGS} ${INCFLAGS} ${GNATFLAGS} $<

constants_nodef: ${srcdir}/constants.c config.h
	${CC} -o constants_nodef -I. -UCONSTANT_NAME ${srcdir}/constants.c

s-garcon.ads: ${CONSTANTS_SH} split constants_nodef config.h
	if test -f ${CONSTANTS_PLATFORM}; then\
	  cp ${CONSTANTS_PLATFORM} s-garcon.ads;\
	else\
	  ${SHELL} ${CONSTANTS_SH} System.Garlic.Constants ${srcdir};\
	fi

s-galiop.ads:
	@echo "private package System.Garlic.Linker_Options is" >s-galiop.ads
	@echo "" >>s-galiop.ads
	@if [ "x$(EXTRA_LIBS)" != "x" ] ; then\
	 for option in `echo $(EXTRA_LIBS)`; do\
	  echo "   pragma Linker_Options (\"$$option\");" >>s-galiop.ads;\
	 done;\
	fi
	@echo "" >>s-galiop.ads
	@echo "end System.Garlic.Linker_Options;" >>s-galiop.ads

# This one deserves some comment: the Makefile variable ISTHRBIO will
# be used to set the shell variable of the same name, whose value will
# in turn be used to create the s-gatcop.ads file. Modifying a shell
# variable implies that the whole rule stays in a single shell
# statement, hence the backslashed lines.

s-gatcop.ads: Makefile
	if test ${ISTHRBIO} = "test"; then \
	  $(MAKE) isthrbio${EXEEXT}; \
	  if ./isthrbio; then \
	    ISTHRBIO="no"; \
	  else \
	    ISTHRBIO="yes"; \
	  fi; \
        else \
	  ISTHRBIO=${ISTHRBIO}; \
	fi; \
	if test $$ISTHRBIO = "yes"; then \
	  S_GATCOP_SUBST="System.Garlic.Thin"; \
	else \
	  S_GATCOP_SUBST="System.Garlic.Non_Blocking"; \
	fi; \
	echo "with $$S_GATCOP_SUBST;" > s-gatcop.ads; \
	echo "package System.Garlic.TCP.Operations" >> s-gatcop.ads; \
	echo "  renames $$S_GATCOP_SUBST;" >> s-gatcop.ads

s-gatcop.o: ${srcdir}/s-garthi.ads ${srcdir}/s-ganobl.adb

${TCP_PLATFORM_SOURCES}: ${S_GTPLSP_ADS} ${S_GTPLSP_ADB}
	cp ${srcdir}/${S_GTPLSP_ADS} s-gtplsp.ads
	@if test -n "${S_GTPLSP_ADB}"; then \
	  cp ${srcdir}/${S_GTPLSP_ADB} s-gtplsp.adb; \
	fi

split: ${srcdir}/split.adb
	$(GNATMAKE) -m -o split ${srcdir}/split.adb

all-local: ${SOURCES} ${OBJECTS} ${LINKTEST}

install-dirs-local:
	-rm -rf ${GARLIC}
	${mkinstalldirs} ${GARLIC}

inlining: all-local
	@if test ! -f inlining; then\
	   mkdir gnatlib >/dev/null 2>&1;\
	   gnatlibdir=`${srcdir}/../Dist/config.sdefault pathtolib`;\
	   for o in `cd $$gnatlibdir && echo *.ali`; do\
	     grep "D s-stratt.adb" $$gnatlibdir/$$o /dev/null;\
	   done | ${SED} 's,^.*[/]\(.*\)\.ali:.*$$,\1.o,g' > gnatlib/tocheck;\
	   for i in ${OBJECTS}; do\
	      cat gnatlib/tocheck > gnatlib/tocheck.tmp;\
	      grep -v $$i gnatlib/tocheck.tmp > gnatlib/tocheck;\
	   done;\
	   if test -s gnatlib/tocheck; then\
	      echo go > inlining;\
	   else\
	      echo no > inlining;\
	   fi;\
	fi
	@if test `cat inlining` = "go"; then\
	   for o in `cat gnatlib/tocheck`; do\
	      if [ ! -f gnatlib/$$o ]; then\
	          s=`gnatls -a -s $$o | sed 's/\013//g'`;\
	          echo\
                    "${ADA_FOR_TARGET} -c ${CFLAGS} ${GNATFLAGS} -I. -I- $$s"\
	            "-o gnatlib/$$o";\
	          ${ADA_FOR_TARGET} -c ${CFLAGS} ${GNATFLAGS} -I. -I-\
                    $$s -o gnatlib/$$o;\
	          if test $$? = 0; then\
	             echo $$o >>gnatlib/rebuild;\
	          else\
	             ${RM} gnatlib/tocheck;\
	             break;\
	          fi;\
	      fi;\
	   done;\
	   echo yes > inlining;\
	fi

linktest: ${srcdir}/linktest.adb ${OBJECTS}
	${GNATMAKE} -c -a -m -I${srcdir} -I. ${srcdir}/linktest.adb
	${GNATBIND} ${srcdir}/linktest.ali -I. -I${srcdir}
	@${GNATBIND} -l ${srcdir}/linktest.ali -I. -I${srcdir} \
	   | grep 'system.garlic.*body' | sed -n '1,1p' \
	   | ${SED} 's/^.*garlic.\(.*\) .*$$/\1/g' > first;
	@if test `cat first` != "debug"; then\
	   echo "system.garlic.debug should be elaborted first";\
	   exit 1;\
	fi

install-extra-libs: ${FILTERINSTALL} inlining

install-data-local: all-local install-dirs-local install-extra-libs 
	@if test ! -f inlining; then\
	   exit 1;\
	fi
	${CP} `${srcdir}/../Dist/config.sdefault pathtolib`libgnat.a \
	  ${GARLIC}/libgnat.a
	chmod u+w ${GARLIC}/libgnat.a
	${AR} d ${GARLIC}/libgnat.a s-stratt.o s-rpc.o s-parint.o
	@if test `cat inlining` = "yes"; then\
	   (cd gnatlib;\
	    ${AR} d ${GARLIC}/libgnat.a `cat rebuild`;\
	    ${AR} cq ${GARLIC}/libgnat.a `cat rebuild`;\
            ${CP} ${CP_PRESERVE} `${SED} 's/\.o/.ali/g' rebuild` ${GARLIC});\
	fi
	${RANLIB} ${GARLIC}/libgnat.a
	for i in ${GARLIC} ${SOURCES}\
		`echo ${OBJECTS} | ${SED} -e 's/\.o/.ali/g'`; do\
		if test -f $$i; then\
			${CP} ${CP_PRESERVE} $$i ${GARLIC}/;\
		fi;\
	done
	${AR} cq ${GARLIC}/libgarlic.a ${OBJECTS}
	${RANLIB} ${GARLIC}/libgarlic.a
	chmod a+r ${GARLIC}/*
	chmod a-w ${GARLIC}/*

# Dependencies

depend: $(SOURCES)
	$(MAKE)
	$(srcdir)/mkdep
	$(MAKE) Makefile

###
### The following section is valid only for developpers that use the
### --enable-debug flag on configure. If you want to make modifications
### outside the development mode, you need to either update the following
### dependencies or to use the "fast" target.
###
### DO NOT REMOVE THIS LINE, IT IS USED BY MAKEDEPEND ###

# Tell versions [3.59,3.63) of GNU make to not export all variables.
# Otherwise a system limit (for SysV at least) may be exceeded.
.NOEXPORT:
