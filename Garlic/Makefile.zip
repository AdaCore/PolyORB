# -*- makefile -*-
#
# $Id$
#
# Makefile portion for the ZIP filter.
#

ZIPOBJECTS = \
s-gafizi.o

ZIPSOURCES = \
${srcdir}/s-gafizi.ads ${srcdir}/s-gafizi.adb

ZIPLIBOBJS = adler32.o compress.o crc32.o gzio.o \
	uncompr.o deflate.o trees.o zutil.o \
	inflate.o infblock.o inftrees.o \
	infcodes.o infutil.o inffast.o

%.o: $(srcdir)/zlib/%.c
	$(CC) -c -O2 -I$(srcdir)/zlib $<

FILTERSOBJECTS += $(ZIPOBJECTS)
FILTERSSOURCES += $(ZIPSOURCES)
FILTERSBUILD   += ${ZIPLIBOBJSNEEDED}
ZIPLIBINSTALL   = install-zlib
FILTERSINSTALL += ${ZIPLIBINSTALLNEEDED}

libz.a: $(ZIPLIBOBJS)

install-zlib: libz.a
	${AR} cq ${GARLIC}/libz.a
	${RANLIB} ${GARLIC}/libz.a

# Dependency

Makefile.fil Makefile.in: Makefile.zip
